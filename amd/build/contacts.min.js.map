{"version":3,"file":"contacts.min.js","sources":["../src/contacts.js"],"sourcesContent":["define(['core/str', 'core/modal_factory', 'core/modal_events',\n    'core/fragment', 'core/templates', 'core/notification', 'core_message/toggle_contact_button'],\n    function (Str, Modal, ModalEvents, Fragment, Templates, Notification, Contact) {\n\n        return {\n            init: function (contextID) {\n                var groupModal = document.getElementsByClassName('contact-widget-viewgroup');\n                var contactUser;\n                Array.from(groupModal).forEach(function (element) {\n                    element.addEventListener('click', function (e) {\n                        e.preventDefault();\n                        var target = e.target.closest('a');\n                        contactUser = target.getAttribute('data-userid');\n                        Modal.create({\n                            title: Str.get_string('groups', 'core')\n                        }).then(function (modal) {\n                            modal.show();\n\n                            var args = JSON.stringify({ contactuser: contactUser });\n                            var params = { widget: 'contacts', method: 'load_groups', args: args };\n                            Fragment.loadFragment('block_dash', 'loadwidget', contextID, params).then((html, js) => {\n                                modal.setBody(html);\n                                Templates.runTemplateJS(js);\n                                return html;\n                            }).catch(Notification.exception);\n\n                            modal.getRoot().on(ModalEvents.hidden, function () {\n                                modal.destroy();\n                            });\n                            return modal;\n                        }).catch(Notification.exception);\n                    });\n                });\n\n                var contactModal = document.getElementsByClassName('toggle-contact-button');\n                Array.from(contactModal).forEach(function (element) {\n                    element.addEventListener('click', function (e) {\n                        e.preventDefault();\n                        if (e.target.dataset.userid != undefined) {\n                            Contact.enhance(e.target);\n                        }\n                    });\n                });\n            }\n        };\n    });\n"],"names":["define","Str","Modal","ModalEvents","Fragment","Templates","Notification","Contact","init","contextID","contactUser","groupModal","document","getElementsByClassName","Array","from","forEach","element","addEventListener","e","preventDefault","target","closest","getAttribute","create","title","get_string","then","modal","show","params","widget","method","args","JSON","stringify","contactuser","loadFragment","html","js","setBody","runTemplateJS","catch","exception","getRoot","on","hidden","destroy","contactModal","undefined","dataset","userid","enhance"],"mappings":"AAAAA,6BAAO,CAAC,WAAY,qBAAsB,oBACtC,gBAAiB,iBAAkB,oBAAqB,uCACxD,SAAUC,IAAKC,MAAOC,YAAaC,SAAUC,UAAWC,aAAcC,eAE3D,CACHC,KAAM,SAAUC,eAERC,YADAC,WAAaC,SAASC,uBAAuB,4BAEjDC,MAAMC,KAAKJ,YAAYK,SAAQ,SAAUC,SACrCA,QAAQC,iBAAiB,SAAS,SAAUC,GACxCA,EAAEC,qBACEC,OAASF,EAAEE,OAAOC,QAAQ,KAC9BZ,YAAcW,OAAOE,aAAa,eAClCrB,MAAMsB,OAAO,CACTC,MAAOxB,IAAIyB,WAAW,SAAU,UACjCC,MAAK,SAAUC,OACdA,MAAMC,WAGFC,OAAS,CAAEC,OAAQ,WAAYC,OAAQ,cAAeC,KAD/CC,KAAKC,UAAU,CAAEC,YAAa1B,sBAEzCN,SAASiC,aAAa,aAAc,aAAc5B,UAAWqB,QAAQH,MAAK,CAACW,KAAMC,MAC7EX,MAAMY,QAAQF,MACdjC,UAAUoC,cAAcF,IACjBD,QACRI,MAAMpC,aAAaqC,WAEtBf,MAAMgB,UAAUC,GAAG1C,YAAY2C,QAAQ,WACnClB,MAAMmB,aAEHnB,SACRc,MAAMpC,aAAaqC,qBAI1BK,aAAepC,SAASC,uBAAuB,yBACnDC,MAAMC,KAAKiC,cAAchC,SAAQ,SAAUC,SACvCA,QAAQC,iBAAiB,SAAS,SAAUC,GACxCA,EAAEC,iBAC6B6B,MAA3B9B,EAAEE,OAAO6B,QAAQC,QACjB5C,QAAQ6C,QAAQjC,EAAEE"}